{
  "version": 3,
  "sources": ["../../@alpinejs/persist/dist/module.esm.js"],
  "sourcesContent": ["// packages/persist/src/index.js\r\nfunction src_default(Alpine) {\r\n  let persist = () => {\r\n    let alias;\r\n    let storage;\r\n    try {\r\n      storage = localStorage;\r\n    } catch (e) {\r\n      console.error(e);\r\n      console.warn(\"Alpine: $persist is using temporary storage since localStorage is unavailable.\");\r\n      let dummy = /* @__PURE__ */ new Map();\r\n      storage = {\r\n        getItem: dummy.get.bind(dummy),\r\n        setItem: dummy.set.bind(dummy)\r\n      };\r\n    }\r\n    return Alpine.interceptor((initialValue, getter, setter, path, key) => {\r\n      let lookup = alias || `_x_${path}`;\r\n      let initial = storageHas(lookup, storage) ? storageGet(lookup, storage) : initialValue;\r\n      setter(initial);\r\n      Alpine.effect(() => {\r\n        let value = getter();\r\n        storageSet(lookup, value, storage);\r\n        setter(value);\r\n      });\r\n      return initial;\r\n    }, (func) => {\r\n      func.as = (key) => {\r\n        alias = key;\r\n        return func;\r\n      }, func.using = (target) => {\r\n        storage = target;\r\n        return func;\r\n      };\r\n    });\r\n  };\r\n  Object.defineProperty(Alpine, \"$persist\", { get: () => persist() });\r\n  Alpine.magic(\"persist\", persist);\r\n  Alpine.persist = (key, { get, set }, storage = localStorage) => {\r\n    let initial = storageHas(key, storage) ? storageGet(key, storage) : get();\r\n    set(initial);\r\n    Alpine.effect(() => {\r\n      let value = get();\r\n      storageSet(key, value, storage);\r\n      set(value);\r\n    });\r\n  };\r\n}\r\nfunction storageHas(key, storage) {\r\n  return storage.getItem(key) !== null;\r\n}\r\nfunction storageGet(key, storage) {\r\n  let value = storage.getItem(key, storage);\r\n  if (value === void 0)\r\n    return;\r\n  return JSON.parse(value);\r\n}\r\nfunction storageSet(key, value, storage) {\r\n  storage.setItem(key, JSON.stringify(value));\r\n}\r\n\r\n// packages/persist/builds/module.js\r\nvar module_default = src_default;\r\nexport {\r\n  module_default as default,\r\n  src_default as persist\r\n};\r\n"],
  "mappings": ";;;AACA,SAAS,YAAY,QAAQ;AAC3B,MAAI,UAAU,MAAM;AAClB,QAAI;AACJ,QAAI;AACJ,QAAI;AACF,gBAAU;AAAA,IACZ,SAAS,GAAG;AACV,cAAQ,MAAM,CAAC;AACf,cAAQ,KAAK,gFAAgF;AAC7F,UAAI,QAAwB,oBAAI,IAAI;AACpC,gBAAU;AAAA,QACR,SAAS,MAAM,IAAI,KAAK,KAAK;AAAA,QAC7B,SAAS,MAAM,IAAI,KAAK,KAAK;AAAA,MAC/B;AAAA,IACF;AACA,WAAO,OAAO,YAAY,CAAC,cAAc,QAAQ,QAAQ,MAAM,QAAQ;AACrE,UAAI,SAAS,SAAS,MAAM,IAAI;AAChC,UAAI,UAAU,WAAW,QAAQ,OAAO,IAAI,WAAW,QAAQ,OAAO,IAAI;AAC1E,aAAO,OAAO;AACd,aAAO,OAAO,MAAM;AAClB,YAAI,QAAQ,OAAO;AACnB,mBAAW,QAAQ,OAAO,OAAO;AACjC,eAAO,KAAK;AAAA,MACd,CAAC;AACD,aAAO;AAAA,IACT,GAAG,CAAC,SAAS;AACX,WAAK,KAAK,CAAC,QAAQ;AACjB,gBAAQ;AACR,eAAO;AAAA,MACT,GAAG,KAAK,QAAQ,CAAC,WAAW;AAC1B,kBAAU;AACV,eAAO;AAAA,MACT;AAAA,IACF,CAAC;AAAA,EACH;AACA,SAAO,eAAe,QAAQ,YAAY,EAAE,KAAK,MAAM,QAAQ,EAAE,CAAC;AAClE,SAAO,MAAM,WAAW,OAAO;AAC/B,SAAO,UAAU,CAAC,KAAK,EAAE,KAAK,IAAI,GAAG,UAAU,iBAAiB;AAC9D,QAAI,UAAU,WAAW,KAAK,OAAO,IAAI,WAAW,KAAK,OAAO,IAAI,IAAI;AACxE,QAAI,OAAO;AACX,WAAO,OAAO,MAAM;AAClB,UAAI,QAAQ,IAAI;AAChB,iBAAW,KAAK,OAAO,OAAO;AAC9B,UAAI,KAAK;AAAA,IACX,CAAC;AAAA,EACH;AACF;AACA,SAAS,WAAW,KAAK,SAAS;AAChC,SAAO,QAAQ,QAAQ,GAAG,MAAM;AAClC;AACA,SAAS,WAAW,KAAK,SAAS;AAChC,MAAI,QAAQ,QAAQ,QAAQ,KAAK,OAAO;AACxC,MAAI,UAAU;AACZ;AACF,SAAO,KAAK,MAAM,KAAK;AACzB;AACA,SAAS,WAAW,KAAK,OAAO,SAAS;AACvC,UAAQ,QAAQ,KAAK,KAAK,UAAU,KAAK,CAAC;AAC5C;AAGA,IAAI,iBAAiB;",
  "names": []
}
